CREATE DATABASE MOVIE_BOOKING;
USE MOVIE_BOOKING;
CREATE TABLE MULTIPLEX(
MULTIPLEX_ID INT PRIMARY KEY,
MULTIPLEX_NAME VARCHAR(200),
MULTIPLEX_MANAGER VARCHAR(30),
MULTIPLEX_ADDRESS VARCHAR(500),
MULTIPLEX_PHONE INT);

DESCRIBE SCREEN;
DROP TABLE SCREEN;
CREATE TABLE SCREEN(
MULTIPLEX_ID INT,
SCREEN_NUMBER INT,
SEAT_COUNT INT,
PRIMARY KEY(MULTIPLEX_ID,SCREEN_NUMBER),
FOREIGN KEY(MULTIPLEX_ID) REFERENCES MULTIPLEX(MULTIPLEX_ID)
);

CREATE TABLE MOVIE(
MOVIE_ID INT PRIMARY KEY,
MOVIE_NAME VARCHAR(100),
MOVIE_DIRECTOR VARCHAR(100) ,
MOVIE_CAST VARCHAR(300),
MOVIE_RATING INT,
MOVIE_LANGUAGE VARCHAR(200)
);

CREATE TABLE MOVIE_SHOW(
SHOW_ID INT PRIMARY KEY,
MOVIE_ID INT,
MULTIPLEX_ID INT,
SCREEN_NUMBER INT,
SHOW_START_DATETIME DATE,
SHOW_END_DATETIME DATE,
FOREIGN KEY(MULTIPLEX_ID) REFERENCES MULTIPLEX(MULTIPLEX_ID),
-- FOREIGN KEY(SCREEN_NUMBER) REFERENCES SCREEN(SCREEN_NUMBER),
FOREIGN KEY(MOVIE_ID) REFERENCES MOVIE(MOVIE_ID)
);


CREATE TABLE CUSTOMER(
CUSTOMER_ID INT PRIMARY KEY,
CUSTOMER_NAME VARCHAR(50),
CUSTOMER_EMAIL VARCHAR(50),
CUSTOMER_PHONE_NUMBER INT,
CUSTOMER_PASSWORD VARCHAR(10),
IS_GUEST CHAR(1)
);

CREATE TABLE BOOKING(
BOOKING_ID INT PRIMARY KEY,
CUSTOMER_ID INT,
SHOW_ID INT,
SHOW_DATE DATE,
BOOKING_DATE DATE,
BOOKING_SEAT_COUNT INT,
BOOKING_AMOUNT_PAID INT,
FOREIGN KEY(SHOW_ID) REFERENCES MOVIE_SHOW(SHOW_ID),
FOREIGN KEY(CUSTOMER_ID) REFERENCES CUSTOMER(CUSTOMER_ID)
);

INSERT INTO MULTIPLEX(MULTIPLEX_ID,MULTIPLEX_NAME,MULTIPLEX_MANAGER,MULTIPLEX_ADDRESS) 
VALUES(10,'AMBIT', 'JACK' , 'AMRITSAR'),
		(20,'AZP MALL', 'ADITYA' , 'LUCKNOW'),
        (30,'PV MALL', 'HIMANSU' , 'DELHI'),
        (40,'INOX', 'LP' , 'JORHAT'),
        (50,'PBP', 'PARVINDER' , 'PUNE'),
        (60,'SUNRISE', 'SCOTT' , 'CHANDIGARH');
        
INSERT INTO SCREEN(MULTIPLEX_ID,SCREEN_NUMBER,SEAT_COUNT)
VALUES(10,1,200),
		(10,2,150),
        (20,1,200),
        (20,2,300),
        (20,3,300),
        (30,1,200),
        (30,2,100),
        (30,3,500),
        (30,4,100),
        (40,1,200),
        (50,1,500),
        (50,2,150),
        (50,3,300);
INSERT INTO MOVIE(MOVIE_ID,MOVIE_NAME,MOVIE_DIRECTOR,MOVIE_CAST,MOVIE_RATING,MOVIE_LANGUAGE)
VALUES (1,'DAR','SUBASH','SHARUKH',4,'HINDI'),
		(2,'HUM','ADITYA','AMITABH',4,'TELGU'),
        (3,'NAVNEET','SURABHI','DEEPIKA',4,'KANNAD'),
        (4,'KHEL','ADITYA','SALMAN',4,'HINDI'),
        (5,'KHOOB','SUBASH','SHARUKH',4,'TELGU');
    
       
INSERT INTO MOVIE(MOVIE_ID,MOVIE_NAME,MOVIE_DIRECTOR,MOVIE_CAST,MOVIE_RATING,MOVIE_LANGUAGE)
VALUES (6,'AMBITIONS','ROMAC','RONALDO',4,'ENGLISH');
INSERT INTO MOVIE(MOVIE_ID,MOVIE_NAME,MOVIE_DIRECTOR,MOVIE_CAST,MOVIE_RATING,MOVIE_LANGUAGE)
VALUES (7,'AMBITIONS','ROMAC','RONALDO',4,'HINDI');

INSERT INTO MOVIE(MOVIE_ID,MOVIE_NAME,MOVIE_DIRECTOR,MOVIE_CAST,MOVIE_RATING,MOVIE_LANGUAGE)
VALUES (8,'THE SECRET','HARRY','TOM HANKS',5,'ENGLISH');

INSERT INTO MOVIE_SHOW(SHOW_ID,MOVIE_ID, MULTIPLEX_ID,SCREEN_NUMBER,SHOW_START_DATETIME,SHOW_END_DATETIME)
VALUES(1,1,10,1,'2020-12-14','2020-12-27'),
		(2,2,20,1,'2020-08-17','2020-12-10'),
		(3,2,10,2,'2020-12-14','2020-12-27'),
		(4,2,10,2,'2020-12-14','2020-12-27'),
		(5,1,10,1,'2020-12-14','2020-12-27');
        
INSERT INTO MOVIE_SHOW(SHOW_ID,MOVIE_ID, MULTIPLEX_ID,SCREEN_NUMBER,SHOW_START_DATETIME,SHOW_END_DATETIME)
VALUES(6,1,10,1,'2020-12-14','2020-12-29'),
		(7,2,20,1,'2020-08-17','2020-12-30'),
		(8,2,10,2,'2020-12-14','2020-12-27'),
		(9,2,10,2,'2020-12-14','2020-12-27'),
		(10,1,10,1,'2020-12-14','2020-12-27');
        
INSERT INTO MOVIE_SHOW(SHOW_ID,MOVIE_ID, MULTIPLEX_ID,SCREEN_NUMBER,SHOW_START_DATETIME,SHOW_END_DATETIME)
VALUES(11,6,10,1,'2020-12-14','2020-12-30');
        
        
SELECT * FROM MOVIE_SHOW;


INSERT INTO CUSTOMER(CUSTOMER_ID,CUSTOMER_NAME,CUSTOMER_EMAIL,CUSTOMER_PHONE_NUMBER,CUSTOMER_PASSWORD,IS_GUEST)
VALUES(100,'ANKIT','ANKIOT@GMAIL.COM',1237892,'ASE123','Y'),
		(200,'ASURESH','SURESH@GMAIL.COM',1263741,'APOE123','Y'),
        (300,'MANALI','MANALI@GMAIL.COM',1895623,'A458796','Y'),
        (400,'PINAK','PINAK@GMAIL.COM',1458365,'A485K3','N'),
        (500,'SANJEEV','SANJEEV@GMAIL.COM',125222,'A58542','N'),
        (600,'DEEPTI','ADEEPTI@GMAIL.COM',1239692,'AS15489','Y'),
        (700,'ABHINAV','ABHINAV@GMAIL.COM',127892,'ASE123','Y');

INSERT INTO BOOKING(BOOKING_ID,CUSTOMER_ID,SHOW_ID,SHOW_DATE,BOOKING_DATE,BOOKING_SEAT_COUNT,BOOKING_AMOUNT_PAID)
VALUES(111,100,1,'2020-12-15','2020-11-15',15,200),
(222,200,2,'2020-12-15','2020-11-15',18,200),
(333,300,3,'2020-12-15','2020-08-10',25,2500),
(444,400,2,'2020-12-15','2020-06-22',28,500),
(555,100,2,'2020-12-15','2020-04-16',35,700),
(666,200,3,'2020-12-15','2020-10-15',5,600),
(777,300,1,'2020-12-15','2020-09-15',7,300),
(888,300,3,'2020-12-15','2020-08-05',11,500);


INSERT INTO BOOKING(BOOKING_ID,CUSTOMER_ID,SHOW_ID,SHOW_DATE,BOOKING_DATE,BOOKING_SEAT_COUNT,BOOKING_AMOUNT_PAID)
VALUES(999,100,1,'2020-12-15','2020-12-29',15,200),
(1111,200,2,'2020-12-15','2020-12-29',18,200),
(2222,300,3,'2020-12-15','2020-12-29',25,2500);